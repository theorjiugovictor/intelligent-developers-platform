<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligence Engine API - Documentation</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="docs-logo-container">
                    <img src="/static/logo/RootOps.png" alt="RootOps Logo" class="docs-logo">
                </div>
                <h1>Intelligence<br/>Engine</h1>
            </div>
            
            <div style="padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color);">
                <a href="/main" class="nav-link" style="background: rgba(99, 102, 241, 0.15); border-left-color: var(--primary-color);">
                    <i class="fas fa-home"></i> Main Dashboard
                </a>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="#overview" class="nav-link active">
                        <i class="fas fa-home"></i> Overview
                    </a>
                    <a href="#authentication" class="nav-link">
                        <i class="fas fa-lock"></i> Authentication
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3>Core Endpoints</h3>
                    <a href="#health" class="nav-link">
                        <i class="fas fa-heartbeat"></i> Health Check
                    </a>
                    <a href="#status" class="nav-link">
                        <i class="fas fa-info-circle"></i> System Status
                    </a>
                    <a href="#metrics" class="nav-link">
                        <i class="fas fa-chart-line"></i> Metrics
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3>Analysis</h3>
                    <a href="#analyze-commit" class="nav-link">
                        <i class="fas fa-code-branch"></i> Analyze Commit
                    </a>
                    <a href="#analyze-logs" class="nav-link">
                        <i class="fas fa-file-alt"></i> Analyze Logs
                    </a>
                    <a href="#analyze-traces" class="nav-link">
                        <i class="fas fa-project-diagram"></i> Analyze Traces
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3>Actions</h3>
                    <a href="#heal" class="nav-link">
                        <i class="fas fa-magic"></i> Self-Healing
                    </a>
                    <a href="#recommendations" class="nav-link">
                        <i class="fas fa-lightbulb"></i> Recommendations
                    </a>
                    <a href="#train" class="nav-link">
                        <i class="fas fa-graduation-cap"></i> Train Models
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <p>Version 1.0.0</p>
                <a href="/redoc" target="_blank" class="footer-link">
                    <i class="fas fa-book"></i> ReDoc
                </a>
                <a href="/docs" target="_blank" class="footer-link">
                    <i class="fas fa-code"></i> Swagger UI
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">Intelligent Development Platform</h1>
                    <p class="hero-subtitle">AI/ML powered platform for predictive development insights</p>
                    <div class="hero-badges">
                        <span class="badge badge-success">
                            <i class="fas fa-check-circle"></i> Online
                        </span>
                        <span class="badge badge-info">
                            <i class="fas fa-code"></i> REST API
                        </span>
                        <span class="badge badge-primary">
                            <i class="fas fa-robot"></i> AI-Powered
                        </span>
                    </div>
                </div>
            </div>

            <div class="content">
                <!-- Overview Section -->
                <section id="overview" class="section">
                    <h2 class="section-title">Overview</h2>
                    <div class="card">
                        <p class="lead">
                            Welcome to the Intelligence Engine API documentation. This powerful platform provides AI-driven insights 
                            for your development workflow, including breaking change detection, anomaly detection, performance 
                            prediction, and automated self-healing capabilities.
                        </p>
                        
                        <div class="features-grid">
                            <div class="feature-card">
                                <i class="fas fa-exclamation-triangle feature-icon"></i>
                                <h3>Breaking Change Detection</h3>
                                <p>Automatically detect potential breaking changes in your codebase</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-search feature-icon"></i>
                                <h3>Anomaly Detection</h3>
                                <p>Identify unusual patterns in logs and system behavior</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-tachometer-alt feature-icon"></i>
                                <h3>Performance Prediction</h3>
                                <p>Predict performance issues before they impact users</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-wrench feature-icon"></i>
                                <h3>Self-Healing</h3>
                                <p>Automated remediation of common issues and problems</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Authentication Section -->
                <section id="authentication" class="section">
                    <h2 class="section-title">Authentication</h2>
                    <div class="card">
                        <p>Currently, the API is open for testing. In production, API keys or OAuth2 tokens would be required.</p>
                        <div class="code-block">
                            <pre><code>curl -H "Authorization: Bearer YOUR_API_KEY" \
     http://localhost:8000/api/v1/status</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Health Check Endpoint -->
                <section id="health" class="section">
                    <h2 class="section-title">Health Check</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-get">GET</span>
                            <span class="endpoint-path">/health</span>
                            <button class="try-button" onclick="tryEndpoint('health')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Check the health status of the Intelligence Engine and its components.</p>
                        
                        <div class="endpoint-section">
                            <h4>Response Example</h4>
                            <div class="code-block">
                                <pre><code>{
  "status": "healthy",
  "timestamp": "2025-11-15T11:38:14.000Z",
  "components": {
    "database": "connected",
    "ml_models": "loaded",
    "services": "ready"
  }
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="health-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Status Endpoint -->
                <section id="status" class="section">
                    <h2 class="section-title">System Status</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-get">GET</span>
                            <span class="endpoint-path">/api/v1/status</span>
                            <button class="try-button" onclick="tryEndpoint('status')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Get the operational status of the system.</p>
                        
                        <div class="endpoint-section">
                            <h4>Response Example</h4>
                            <div class="code-block">
                                <pre><code>{
  "status": "operational",
  "version": "1.0.0",
  "timestamp": "2025-11-15T11:38:14.000Z"
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="status-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Metrics Endpoint -->
                <section id="metrics" class="section">
                    <h2 class="section-title">System Metrics</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-get">GET</span>
                            <span class="endpoint-path">/api/v1/metrics</span>
                            <button class="try-button" onclick="tryEndpoint('metrics')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Get comprehensive metrics about system operations and analysis.</p>
                        
                        <div class="endpoint-section">
                            <h4>Response Example</h4>
                            <div class="code-block">
                                <pre><code>{
  "total_commits_analyzed": 0,
  "total_logs_analyzed": 0,
  "total_traces_analyzed": 0,
  "breaking_changes_detected": 0,
  "anomalies_detected": 0,
  "healing_actions_taken": 0,
  "timestamp": "2025-11-15T11:38:14.000Z"
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="metrics-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Analyze Commit Endpoint -->
                <section id="analyze-commit" class="section">
                    <h2 class="section-title">Analyze Commit</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-post">POST</span>
                            <span class="endpoint-path">/api/v1/analyze/commit</span>
                            <button class="try-button" onclick="toggleTestForm('analyze-commit')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Analyze a Git commit for breaking changes and potential issues.</p>
                        
                        <div id="analyze-commit-form" class="test-form" style="display: none;">
                            <h4>Test this endpoint</h4>
                            <div class="form-group">
                                <label>Repository</label>
                                <input type="text" id="commit-repo" placeholder="e.g., owner/repo" value="example/repo">
                            </div>
                            <div class="form-group">
                                <label>Commit Hash</label>
                                <input type="text" id="commit-hash" placeholder="e.g., abc123def456" value="abc123def456">
                            </div>
                            <button class="execute-button" onclick="executeCommitAnalysis()">
                                <i class="fas fa-play-circle"></i> Execute Request
                            </button>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Request Body</h4>
                            <div class="code-block">
                                <pre><code>{
  "repository": "owner/repo",
  "commit_hash": "abc123def456"
}</code></pre>
                            </div>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Parameters</h4>
                            <table class="params-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Required</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>repository</code></td>
                                        <td>string</td>
                                        <td><span class="badge badge-danger">Yes</span></td>
                                        <td>Repository identifier (e.g., "owner/repo")</td>
                                    </tr>
                                    <tr>
                                        <td><code>commit_hash</code></td>
                                        <td>string</td>
                                        <td><span class="badge badge-danger">Yes</span></td>
                                        <td>Git commit hash to analyze</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="analyze-commit-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Analyze Logs Endpoint -->
                <section id="analyze-logs" class="section">
                    <h2 class="section-title">Analyze Logs</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-post">POST</span>
                            <span class="endpoint-path">/api/v1/analyze/logs</span>
                            <button class="try-button" onclick="toggleTestForm('analyze-logs')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Analyze application logs for patterns and anomalies.</p>
                        
                        <div id="analyze-logs-form" class="test-form" style="display: none;">
                            <h4>Test this endpoint</h4>
                            <div class="form-group">
                                <label>Log Data (JSON)</label>
                                <textarea id="logs-data" rows="8" placeholder="Enter log entries in JSON format">{
  "logs": [
    {
      "timestamp": "2025-11-15T11:38:14.000Z",
      "level": "ERROR",
      "message": "Connection timeout",
      "service": "api-gateway"
    }
  ]
}</textarea>
                            </div>
                            <button class="execute-button" onclick="executeLogsAnalysis()">
                                <i class="fas fa-play-circle"></i> Execute Request
                            </button>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Request Body</h4>
                            <div class="code-block">
                                <pre><code>{
  "logs": [
    {
      "timestamp": "2025-11-15T11:38:14.000Z",
      "level": "ERROR",
      "message": "Connection timeout",
      "service": "api-gateway"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="analyze-logs-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Analyze Traces Endpoint -->
                <section id="analyze-traces" class="section">
                    <h2 class="section-title">Analyze Traces</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-post">POST</span>
                            <span class="endpoint-path">/api/v1/analyze/traces</span>
                            <button class="try-button" onclick="toggleTestForm('analyze-traces')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Analyze distributed traces for performance issues.</p>
                        
                        <div id="analyze-traces-form" class="test-form" style="display: none;">
                            <h4>Test this endpoint</h4>
                            <div class="form-group">
                                <label>Trace Data (JSON)</label>
                                <textarea id="traces-data" rows="8" placeholder="Enter trace data in JSON format">{
  "traces": [
    {
      "trace_id": "abc123",
      "span_id": "def456",
      "duration_ms": 250,
      "service": "user-service"
    }
  ]
}</textarea>
                            </div>
                            <button class="execute-button" onclick="executeTracesAnalysis()">
                                <i class="fas fa-play-circle"></i> Execute Request
                            </button>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Request Body</h4>
                            <div class="code-block">
                                <pre><code>{
  "traces": [
    {
      "trace_id": "abc123",
      "span_id": "def456",
      "duration_ms": 250,
      "service": "user-service"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="analyze-traces-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Self-Healing Endpoint -->
                <section id="heal" class="section">
                    <h2 class="section-title">Trigger Self-Healing</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-post">POST</span>
                            <span class="endpoint-path">/api/v1/heal</span>
                            <button class="try-button" onclick="toggleTestForm('heal')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Trigger automated self-healing for detected issues.</p>
                        
                        <div id="heal-form" class="test-form" style="display: none;">
                            <h4>Test this endpoint</h4>
                            <div class="form-group">
                                <label>Issue Type</label>
                                <input type="text" id="heal-issue-type" placeholder="e.g., memory_leak" value="memory_leak">
                            </div>
                            <div class="form-group">
                                <label>Service</label>
                                <input type="text" id="heal-service" placeholder="e.g., api-gateway" value="api-gateway">
                            </div>
                            <div class="form-group">
                                <label>Severity</label>
                                <select id="heal-severity">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high" selected>High</option>
                                    <option value="critical">Critical</option>
                                </select>
                            </div>
                            <button class="execute-button" onclick="executeHeal()">
                                <i class="fas fa-play-circle"></i> Execute Request
                            </button>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Request Body</h4>
                            <div class="code-block">
                                <pre><code>{
  "issue_type": "memory_leak",
  "context": {
    "service": "api-gateway",
    "severity": "high",
    "details": {...}
  }
}</code></pre>
                            </div>
                        </div>
                        
                        <div id="heal-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Recommendations Endpoint -->
                <section id="recommendations" class="section">
                    <h2 class="section-title">Get Recommendations</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-get">GET</span>
                            <span class="endpoint-path">/api/v1/recommendations</span>
                            <button class="try-button" onclick="tryEndpoint('recommendations')">
                                <i class="fas fa-play"></i> Try it
                            </button>
                        </div>
                        <p class="endpoint-description">Get optimization recommendations based on analysis.</p>
                        
                        <div class="endpoint-section">
                            <h4>Query Parameters</h4>
                            <table class="params-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Default</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>limit</code></td>
                                        <td>integer</td>
                                        <td>10</td>
                                        <td>Maximum number of recommendations to return</td>
                                    </tr>
                                    <tr>
                                        <td><code>severity</code></td>
                                        <td>string</td>
                                        <td>null</td>
                                        <td>Filter by severity level (low, medium, high, critical)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="recommendations-result" class="result-panel" style="display: none;"></div>
                    </div>
                </section>

                <!-- Train Models Endpoint -->
                <section id="train" class="section">
                    <h2 class="section-title">Train ML Models</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method method-post">POST</span>
                            <span class="endpoint-path">/api/v1/train</span>
                        </div>
                        <p class="endpoint-description">Trigger training for ML models with new data.</p>
                        
                        <div class="endpoint-section">
                            <h4>Query Parameters</h4>
                            <table class="params-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Required</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>model_type</code></td>
                                        <td>string</td>
                                        <td><span class="badge badge-danger">Yes</span></td>
                                        <td>Type of model to train (breaking_change, anomaly, performance)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="endpoint-section">
                            <h4>Response Example</h4>
                            <div class="code-block">
                                <pre><code>{
  "status": "training_started",
  "model_type": "anomaly",
  "timestamp": "2025-11-15T11:38:14.000Z"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="/static/script.js"></script>
    <script>
        // Toggle test form visibility
        function toggleTestForm(endpoint) {
            const form = document.getElementById(`${endpoint}-form`);
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
            }
        }

        // Show result in panel
        function showResult(endpoint, data, isError = false) {
            const resultDiv = document.getElementById(`${endpoint}-result`);
            if (!resultDiv) return;

            resultDiv.style.display = 'block';
            resultDiv.className = `result-panel ${isError ? 'result-error' : 'result-success'}`;
            
            const icon = isError ? 'exclamation-circle' : 'check-circle';
            const iconColor = isError ? '#ef4444' : '#10b981';
            
            resultDiv.innerHTML = `
                <h4><i class="fas fa-${icon}" style="color: ${iconColor};"></i> ${isError ? 'Error' : 'Success'}</h4>
                <div class="code-block">
                    <pre><code>${JSON.stringify(data, null, 2)}</code></pre>
                </div>
            `;

            // Add copy button
            const codeBlock = resultDiv.querySelector('.code-block');
            if (codeBlock && !codeBlock.querySelector('.copy-button')) {
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.innerHTML = '<i class="fas fa-copy"></i>';
                button.title = 'Copy to clipboard';
                
                button.addEventListener('click', () => {
                    const code = codeBlock.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        button.innerHTML = '<i class="fas fa-check"></i>';
                        button.style.color = '#10b981';
                        setTimeout(() => {
                            button.innerHTML = '<i class="fas fa-copy"></i>';
                            button.style.color = '';
                        }, 2000);
                    });
                });
                
                codeBlock.style.position = 'relative';
                codeBlock.appendChild(button);
            }

            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Execute commit analysis
        async function executeCommitAnalysis() {
            const repository = document.getElementById('commit-repo').value;
            const commit_hash = document.getElementById('commit-hash').value;

            if (!repository || !commit_hash) {
                showResult('analyze-commit', { error: 'Please fill in all fields' }, true);
                return;
            }

            try {
                const response = await fetch('/api/v1/analyze/commit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ repository, commit_hash })
                });
                const data = await response.json();
                showResult('analyze-commit', data, !response.ok);
            } catch (error) {
                showResult('analyze-commit', { error: error.message }, true);
            }
        }

        // Execute logs analysis
        async function executeLogsAnalysis() {
            const logsData = document.getElementById('logs-data').value;

            try {
                const parsedData = JSON.parse(logsData);
                const response = await fetch('/api/v1/analyze/logs', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(parsedData)
                });
                const data = await response.json();
                showResult('analyze-logs', data, !response.ok);
            } catch (error) {
                showResult('analyze-logs', { error: error.message }, true);
            }
        }

        // Execute traces analysis
        async function executeTracesAnalysis() {
            const tracesData = document.getElementById('traces-data').value;

            try {
                const parsedData = JSON.parse(tracesData);
                const response = await fetch('/api/v1/analyze/traces', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(parsedData)
                });
                const data = await response.json();
                showResult('analyze-traces', data, !response.ok);
            } catch (error) {
                showResult('analyze-traces', { error: error.message }, true);
            }
        }

        // Execute heal
        async function executeHeal() {
            const issue_type = document.getElementById('heal-issue-type').value;
            const service = document.getElementById('heal-service').value;
            const severity = document.getElementById('heal-severity').value;

            if (!issue_type || !service) {
                showResult('heal', { error: 'Please fill in all fields' }, true);
                return;
            }

            try {
                const response = await fetch('/api/v1/heal', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        issue_type,
                        context: { service, severity, details: {} }
                    })
                });
                const data = await response.json();
                showResult('heal', data, !response.ok);
            } catch (error) {
                showResult('heal', { error: error.message }, true);
            }
        }
    </script>
</body>
</html>
